reader:
  name: etm_l1_tif
  short_name: ETM+ L1 GeoTIFF
  long_name: Landsat-7 ETM+ L1 data in GeoTIFF format.
  description: GeoTIFF reader for Landsat-7 ETM+ L1 data.
  status: Beta
  supports_fsspec: true
  sensors: etm+
  default_channels: []
  reader: !!python/name:satpy.readers.core.yaml_reader.FileYAMLReader
  data_identification_keys:
    name:
      required: true
    wavelength:
      type: !!python/name:satpy.dataset.dataid.WavelengthRange
    resolution:
      transitive: false
    calibration:
      enum:
        - reflectance
        - brightness_temperature
        - radiance
        - counts
      transitive: true
    modifiers:
      default: []
      type: !!python/name:satpy.dataset.dataid.ModifierTuple

file_types:
    # Spectral bands
    granule_B1:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B1.TIF']
        requires: [l1_metadata]

    granule_B2:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B2.TIF']
        requires: [l1_metadata]

    granule_B3:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B3.TIF']
        requires: [l1_metadata]

    granule_B4:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B4.TIF']
        requires: [l1_metadata]

    granule_B5:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B5.TIF']
        requires: [l1_metadata]

    granule_B7:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B7.TIF']
        requires: [l1_metadata]

    granule_B8:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B8.TIF']
        requires: [l1_metadata]

    # Thermal bands
    granule_B6_VCID_1:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B6_VCID_1.TIF']
        requires: [l1_metadata]

    granule_B6_VCID_2:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_B6_VCID_2.TIF']
        requires: [l1_metadata]

    # Geometry datasets
    granule_sza:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_SZA.TIF']
        requires: [l1_metadata]
    granule_saa:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_SAA.TIF']
        requires: [l1_metadata]
    granule_vza:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_VZA.TIF']
        requires: [l1_metadata]
    granule_vaa:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_VAA.TIF']
        requires: [l1_metadata]

    # Gap masks
    granule_B1_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B1.TIF']
        requires: [l1_metadata]

    granule_B2_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B2.TIF']
        requires: [l1_metadata]

    granule_B3_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B3.TIF']
        requires: [l1_metadata]

    granule_B4_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B4.TIF']
        requires: [l1_metadata]

    granule_B5_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B5.TIF']
        requires: [l1_metadata]

    granule_B6_VCID_1_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B6_VCID_1.TIF']
        requires: [l1_metadata]

    granule_B6_VCID_2_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B6_VCID_2.TIF']
        requires: [l1_metadata]

    granule_B7_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B7.TIF']
        requires: [l1_metadata]

    granule_B8_GM:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_GM_B8.TIF']
        requires: [l1_metadata]

    # QA Variables
    granule_qa:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_QA.TIF', '{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category:2s}_QA_PIXEL.TIF']
        requires: [l1_metadata]
    granule_qa_radsat:
        file_reader: !!python/name:satpy.readers.core.landsat.ETMCHReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category}_QA_RADSAT.TIF']
        requires: [l1_metadata]

    l1_metadata:
        file_reader: !!python/name:satpy.readers.core.landsat.LandsatL1MDReader
        file_patterns: ['{platform_type:1s}{data_type:1s}{spacecraft_id:2s}_{process_level_correction:4s}_{tilepath:3s}{tilerow:3s}_{observation_date:%Y%m%d}_{processing_date:%Y%m%d}_{collection_id:2s}_{collection_category}_MTL.xml']

datasets:
  B1:
    name: B1
    sensor: etm+
    wavelength: [0.441, 0.477, 0.514]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B1

  B2:
    name: B2
    sensor: etm+
    wavelength: [0.519, 0.560, 0.601]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B2

  B3:
    name: B3
    sensor: etm+
    wavelength: [0.631, 0.661, 0.692]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B3

  B4:
    name: B4
    sensor: etm+
    wavelength: [0.772, 0.835, 0.898]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B4

  B5:
    name: B5
    sensor: etm+
    wavelength: [1.547, 1.648, 1.749]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B5

  B7:
    name: B7
    sensor: etm+
    wavelength: [2.064, 2.204, 2.345]
    resolution: 30
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B7

  B8:
    name: B8
    sensor: etm+
    wavelength: [0.520, 0.710, 0.900]
    resolution: 15
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B8

  # Thermal bands
  B6_VCID_1:
    name: B6_VCID_1
    sensor: etm+
    wavelength: [10.40, 11.45, 12.50]
    resolution: 30
    calibration:
      brightness_temperature:
        standard_name: brightness_temperature
        units: "K"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B6_VCID_1

  B6_VCID_2:
    name: B6_VCID_2
    sensor: etm+
    wavelength: [10.40, 11.45, 12.50]
    resolution: 30
    calibration:
      brightness_temperature:
        standard_name: brightness_temperature
        units: "K"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
        units: W m-2 um-1 sr-1
      counts:
        standard_name: counts
        units: "1"
    file_type: granule_B6_VCID_2

  # QA Variables
  qa:
    name: qa
    sensor: etm+
    resolution: 30
    file_type: granule_qa

  qa_radsat:
    name: qa_radsat
    sensor: etm+
    resolution: 30
    file_type: granule_qa_radsat

  # Angles datasets
  solar_zenith_angle:
    name: solar_zenith_angle
    sensor: etm+
    standard_name: solar_zenith_angle
    resolution: 30
    units: "degrees"
    file_type: granule_sza

  solar_azimuth_angle:
    name: solar_azimuth_angle
    sensor: etm+
    standard_name: solar_azimuth_angle
    resolution: 30
    units: "degrees"
    file_type: granule_saa

  satellite_zenith_angle:
    name: satellite_zenith_angle
    sensor: etm+
    standard_name: viewing_zenith_angle
    resolution: 30
    units: "degrees"
    file_type: granule_vza

  satellite_azimuth_angle:
    name: satellite_azimuth_angle
    sensor: etm+
    standard_name: viewing_azimuth_angle
    resolution: 30
    units: "degrees"
    file_type: granule_vaa

  # Gap masks
  B1_GM:
    name: B1_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B1_GM

  B2_GM:
    name: B2_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B2_GM

  B3_GM:
    name: B3_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B3_GM

  B4_GM:
    name: B4_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B4_GM

  B5_GM:
    name: B5_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B5_GM

  B6_VCID_1_GM:
    name: B6_VCID_1_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B6_VCID_1_GM

  B6_VCID_2_GM:
    name: B6_VCID_2_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B6_VCID_2_GM


  B7_GM:
    name: B7_GM
    sensor: etm+
    resolution: 30
    file_type: granule_B7_GM

  B8_GM:
    name: B8_GM
    sensor: etm+
    resolution: 15
    file_type: granule_B8_GM
