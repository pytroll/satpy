reader:
  description: SAFE Reader for MSI data (Sentinel-2)
  name: msi_safe
  sensors: [msi]
  default_channels: []
  reader: !!python/name:satpy.readers.yaml_reader.FileYAMLReader

file_types:
    safe_granule:
        file_reader: !!python/name:satpy.readers.msi_safe.SAFEMSIL1C
        file_patterns: ['{fmission_id:3s}_MSIL1C_{observation_time:%Y%m%dT%H%M%S}_N{fprocessing_baseline_number:4d}_R{relative_orbit_number:3d}_T{dtile_number:5s}_{dproduct_discriminator:%Y%m%dT%H%M%S}.SAFE/GRANULE/L1C_T{gtile_number:5s}_A{absolute_orbit_number:6d}_{gfile_discriminator:%Y%m%dT%H%M%S}/IMG_DATA/T{tile_number:5s}_{file_discriminator:%Y%m%dT%H%M%S}_{band_name:3s}.jp2']
        requires: [safe_g_metadata]
    safe_g_metadata:
        file_reader: !!python/name:satpy.readers.msi_safe.SAFEMSIMDXML
        file_patterns: ['{fmission_id:3s}_MSIL1C_{observation_time:%Y%m%dT%H%M%S}_N{fprocessing_baseline_number:4d}_R{relative_orbit_number:3d}_T{dtile_number:5s}_{dproduct_discriminator:%Y%m%dT%H%M%S}.SAFE/GRANULE/L1C_T{gtile_number:5s}_A{absolute_orbit_number:6d}_{gfile_discriminator:%Y%m%dT%H%M%S}/MTD_TL.xml']

datasets:

  B01:
    name: B01
    sensor: MSI
    wavelength: [0.432, 0.443, 0.453]
    resolution: 60
    file_type: safe_granule

  B02:
    name: B02
    sensor: MSI
    wavelength: [0.458, 0.492, 0.526]
    resolution: 10
    file_type: safe_granule

  B03:
    name: B03
    sensor: MSI
    wavelength: [0.541, 0.560, 0.579]
    resolution: 10
    file_type: safe_granule

  B04:
    name: B04
    sensor: MSI
    wavelength: [0.649, 0.665, 0.681]
    resolution: 10
    file_type: safe_granule

  B05:
    name: B05
    sensor: MSI
    wavelength: [0.697, 0.704, 0.712]
    resolution: 20
    file_type: safe_granule

  B06:
    name: B06
    sensor: MSI
    wavelength: [0.733, 0.740, 0.748]
    resolution: 20
    file_type: safe_granule

  B07:
    name: B07
    sensor: MSI
    wavelength: [0.772, 0.783, 0.794]
    resolution: 20
    file_type: safe_granule

  B08:
    name: B08
    sensor: MSI
    wavelength: [0.780, 0.833, 0.901]
    resolution: 10
    file_type: safe_granule

  B8A:
    name: B8A
    sensor: MSI
    wavelength: [0.855, 0.865, 0.875]
    resolution: 20
    file_type: safe_granule

  B09:
    name: B09
    sensor: MSI
    wavelength: [0.934, 0.945, 0.956]
    resolution: 60
    file_type: safe_granule

  B10:
    name: B10
    sensor: MSI
    wavelength: [1.357, 1.373, 1.390]
    resolution: 60
    file_type: safe_granule

  B11:
    name: B11
    sensor: MSI
    wavelength: [1.565, 1.614, 1.662]
    resolution: 20
    file_type: safe_granule

  B12:
    name: B12
    sensor: MSI
    wavelength: [2.104, 2.202, 2.295]
    resolution: 20
    file_type: safe_granule


  solar_zenith_angle:
    name: solar_zenith_angle
    resolution: [10, 20, 60]
    file_type: safe_g_metadata
    xml_tag: Sun_Angles_Grid/Zenith

  solar_azimuth_angle:
    name: solar_azimuth_angle
    resolution: [10, 20, 60]
    file_type: safe_g_metadata
    xml_tag: Sun_Angles_Grid/Azimuth

  satellite_azimuth_angle:
    name: satellite_azimuth_angle
    resolution: [10, 20, 60]
    file_type: safe_g_metadata
    xml_tag: Viewing_Incidence_Angles_Grids
    xml_item: Azimuth

  satellite_zenith_angle:
    name: satellite_zenith_angle
    resolution: [10, 20, 60]
    file_type: safe_g_metadata
    xml_tag: Viewing_Incidence_Angles_Grids
    xml_item: Zenith
